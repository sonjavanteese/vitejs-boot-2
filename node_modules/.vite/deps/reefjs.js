// node_modules/reefjs/dist/reef.es.min.js
function e(e2, t2, n2 = document) {
  let r2 = new CustomEvent("reef:" + e2, { bubbles: true, cancelable: true, detail: t2 });
  return n2.dispatchEvent(r2);
}
function t(e2) {
  return "string" == typeof e2 ? document.querySelector(e2) : e2;
}
function n(e2) {
  return Object.prototype.toString.call(e2).slice(8, -1).toLowerCase();
}
function r(t2 = {}, r2 = "") {
  return t2 = ["array", "object"].includes(n(t2)) ? t2 : { value: t2 }, new Proxy(t2, function t3(r3, o2) {
    let i2 = "store" + (r3 ? "-" + r3 : "");
    return { get: (e2, i3) => "_isProxy" === i3 || (["object", "array"].includes(n(e2[i3])) && !e2[i3]._isProxy && (e2[i3] = new Proxy(e2[i3], t3(r3, o2))), e2[i3]), set: (t4, n2, r4) => (t4[n2] === r4 || (t4[n2] = r4, e(i2, o2)), true), deleteProperty: (t4, n2) => (delete t4[n2], e(i2, o2), true) };
  }(r2, t2));
}
var o = class {
  constructor(t2, r2, o2 = "") {
    let i2 = "store" + (o2 ? "-" + o2 : "");
    Object.defineProperties(this, { data: { get: () => function e2(t3) {
      let r3 = n(t3);
      return "object" === r3 ? function() {
        let n2 = {};
        for (let r4 in t3)
          Object.prototype.hasOwnProperty.call(t3, r4) && (n2[r4] = e2(t3[r4]));
        return n2;
      }() : "array" === r3 ? t3.map(function(t4) {
        return e2(t4);
      }) : t3;
    }(t2), set: () => true } });
    for (let n2 in r2)
      "function" == typeof r2[n2] && (this[n2] = function(...o3) {
        r2[n2](t2, ...o3), e(i2, t2);
      });
  }
};
function i(e2 = {}, t2 = {}, n2 = "") {
  return new o(e2, t2, n2);
}
var l = ["input", "option", "textarea"];
var s = ["value", "checked", "selected"];
var c = ["checked", "selected"];
function u(e2) {
  return ["false", "null", "undefined", "0", "-0", "NaN", "0n", "-0n"].includes(e2);
}
function d(e2, t2, n2) {
  let r2 = t2.replace(/\s+/g, "").toLowerCase();
  return !(!["src", "href", "xlink:href"].includes(e2) || !r2.includes("javascript:") && !r2.includes("data:text/html")) || (!(n2 || !e2.startsWith("on")) || void 0);
}
function a(e2, t2, n2, r2) {
  d(t2, n2, r2) || (s.includes(t2) && (e2[t2] = "value" === t2 ? n2 : " "), e2.setAttribute(t2, n2));
}
function f(e2, t2) {
  s.includes(t2) && (e2[t2] = ""), e2.removeAttribute(t2);
}
function h(e2, t2) {
  if (1 === e2.nodeType) {
    for (let { name: n2, value: r2 } of e2.attributes) {
      if (d(n2, r2, t2)) {
        f(e2, n2);
        continue;
      }
      if (!n2.startsWith("@") && !n2.startsWith("#"))
        continue;
      let o2 = n2.slice(1);
      f(e2, n2), c.includes(o2) && u(r2) || a(e2, o2, r2, t2);
    }
    if (e2.childNodes)
      for (let n2 of e2.childNodes)
        h(n2, t2);
  }
}
function m(e2) {
  return e2.childNodes && e2.childNodes.length ? null : e2.textContent;
}
function p(e2, t2) {
  return "number" == typeof e2.nodeType && e2.nodeType !== t2.nodeType || "string" == typeof e2.tagName && e2.tagName !== t2.tagName || "string" == typeof e2.id && e2.id !== t2.id || "string" == typeof e2.src && e2.src !== t2.src;
}
function y(e2, t2, n2) {
  let r2 = e2.childNodes, o2 = t2.childNodes;
  (function(e3) {
    let t3 = e3.querySelectorAll("script");
    for (let e4 of t3)
      e4.remove();
  })(e2) || (r2.forEach(function(e3, r3) {
    if (!o2[r3]) {
      let r4 = e3.cloneNode(true);
      return h(r4, n2), void t2.append(r4);
    }
    if (p(e3, o2[r3])) {
      let t3 = function(e4, t4, n3) {
        return Array.from(t4).slice(n3 + 1).find(function(t5) {
          return !p(e4, t5);
        });
      }(e3, o2, r3);
      if (!t3) {
        let t4 = e3.cloneNode(true);
        return h(t4, n2), void o2[r3].before(t4);
      }
      o2[r3].before(t3);
    }
    if (function(e4, t3, n3) {
      if (1 !== e4.nodeType)
        return;
      let r4 = e4.attributes, o3 = t3.attributes;
      for (let { name: o4, value: i3 } of r4) {
        if (o4.startsWith("#"))
          continue;
        if (s.includes(o4) && l.includes(e4.tagName.toLowerCase()))
          continue;
        let r5 = o4.startsWith("@") ? o4.slice(1) : o4;
        c.includes(r5) && u(i3) ? f(t3, r5) : a(t3, r5, i3, n3);
      }
      for (let { name: e5, value: n4 } of o3)
        r4[e5] || s.includes(e5) && l.includes(t3.tagName.toLowerCase()) || f(t3, e5);
    }(e3, o2[r3], n2), e3.nodeName.includes("-"))
      return;
    let i2 = m(e3);
    if (i2 && i2 !== m(o2[r3]) && (o2[r3].textContent = i2), e3.childNodes.length || !o2[r3].childNodes.length) {
      if (!o2[r3].childNodes.length && e3.childNodes.length) {
        let t3 = document.createDocumentFragment();
        return y(e3, t3, n2), void o2[r3].appendChild(t3);
      }
      e3.childNodes.length && y(e3, o2[r3], n2);
    } else
      o2[r3].innerHTML = "";
  }), function(e3, t3) {
    let n3 = e3.length - t3.length;
    if (!(n3 < 1))
      for (; n3 > 0; n3--)
        e3[e3.length - 1].remove();
  }(o2, r2));
}
function b(n2, r2, o2) {
  let i2 = t(n2);
  y(function(e2) {
    let t2 = new DOMParser().parseFromString(e2, "text/html");
    return t2.head && t2.head.childNodes.length && Array.from(t2.head.childNodes).reverse().forEach(function(e3) {
      t2.body.insertBefore(e3, t2.body.firstChild);
    }), t2.body || document.createElement("body");
  }(r2), i2, o2), e("render", null, i2);
}
var g = class {
  constructor(e2, t2, n2) {
    var r2;
    this.elem = e2, this.template = t2, this.stores = n2.stores ? n2.stores.map((e3) => "reef:store-" + e3) : ["reef:store"], this.events = n2.events, this.handler = (r2 = this, function(e3) {
      r2.render();
    }), this.debounce = null, this.start();
  }
  start() {
    for (let e2 of this.stores)
      document.addEventListener(e2, this.handler);
    this.render(), e("start", null, t(this.elem));
  }
  stop() {
    for (let e2 of this.stores)
      document.removeEventListener(e2, this.handler);
    e("stop", null, t(this.elem));
  }
  render() {
    let e2 = this;
    e2.debounce && window.cancelAnimationFrame(e2.debounce), e2.debounce = window.requestAnimationFrame(function() {
      b(e2.elem, e2.template(), e2.events);
    });
  }
};
function v(e2, t2, n2 = {}) {
  return new g(e2, t2, n2);
}
export {
  v as component,
  b as render,
  i as setter,
  r as store
};
/*! reef v12.1.1 | (c) 2022 Chris Ferdinandi | MIT License | http://github.com/cferdinandi/reef */
//# sourceMappingURL=reefjs.js.map
